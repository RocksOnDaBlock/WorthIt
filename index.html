<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Income & Purchase Calculator</title>
    <style>
        :root {
            --primary: #4361ee;
            --primary-light: #eef1ff;
            --secondary: #7209b7;
            --text: #2b2d42;
            --text-light: #8d99ae;
            --background: #f8f9fa;
            --card: #ffffff;
            --border: #e9ecef;
            --success: #2ecc71;
            --warning: #f39c12;
            --danger: #e74c3c;
            --radius: 12px;
            --shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }
        
        body {
            background-color: var(--background);
            color: var(--text);
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding-bottom: 40px;
        }
        
        h1 {
            text-align: center;
            color: var(--primary);
            margin: 20px 0 30px;
            font-size: 28px;
            font-weight: 700;
        }
        
        .card {
            background-color: var(--card);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 24px;
            margin-bottom: 24px;
        }
        
        .card-title {
            color: var(--text);
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
        }
        
        .card-title svg {
            margin-right: 8px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text);
            font-size: 15px;
        }
        
        input, select {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            font-size: 16px;
            transition: all 0.2s;
            color: var(--text);
            background-color: var(--card);
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
        }
        
        button {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 14px 20px;
            width: 100%;
            border-radius: var(--radius);
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        button:hover {
            background-color: #3651d4;
            transform: translateY(-1px);
            box-shadow: 0 6px 16px rgba(67, 97, 238, 0.15);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }
        
        .results {
            margin-top: 24px;
            border-radius: var(--radius);
            overflow: hidden;
            border: 1px solid var(--border);
        }
        
        .results-title {
            padding: 12px 16px;
            background-color: var(--primary-light);
            color: var(--primary);
            font-weight: 600;
            font-size: 16px;
        }
        
        .result-group {
            padding: 16px;
            border-bottom: 1px solid var(--border);
        }
        
        .result-group:last-child {
            border-bottom: none;
        }
        
        .result-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .result-item:last-child {
            margin-bottom: 0;
        }
        
        .result-label {
            font-weight: 500;
            color: var(--text-light);
        }
        
        .result-value {
            font-weight: 600;
            color: var(--text);
        }
        
        .purchase-result {
            text-align: center;
            font-size: 18px;
            margin-top: 20px;
            padding: 16px;
            background-color: var(--primary-light);
            border-radius: var(--radius);
            color: var(--primary);
            font-weight: 600;
        }
        
        .purchase-detail {
            font-size: 15px;
            font-weight: 400;
            margin-top: 8px;
            color: var(--text);
        }
        
        .divider {
            height: 1px;
            background-color: var(--border);
            margin: 24px 0;
        }
        
        .hidden {
            display: none;
        }
        
        .checkbox-group {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .checkbox-group input[type="checkbox"] {
            width: auto;
            margin-right: 10px;
        }
        
        .checkbox-group label {
            display: inline;
            margin-bottom: 0;
        }
        
        .worth-it-meter {
            margin-top: 20px;
            text-align: center;
        }
        
        .worth-it-label {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 12px;
        }
        
        .worth-it-bar {
            height: 10px;
            width: 100%;
            background-color: #e9ecef;
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        
        .worth-it-progress {
            height: 100%;
            border-radius: 5px;
            transition: width 0.3s ease;
        }
        
        .worth-it-text {
            font-weight: 600;
            font-size: 16px;
        }
        
        .worth-it-text.worth-it {
            color: var(--success);
        }
        
        .worth-it-text.kinda-worth-it {
            color: #20bf6b;
        }
        
        .worth-it-text.maybe-worth-it {
            color: var(--warning);
        }
        
        .worth-it-text.not-worth-it {
            color: var(--danger);
        }
        
        .salary-fields {
            display: none;
        }
        
        @media (max-width: 600px) {
            .grid {
                grid-template-columns: 1fr;
            }
            
            .card {
                padding: 20px;
            }
            
            h1 {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Income & Purchase Calculator</h1>
        
        <div class="card">
            <div class="card-title">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 1V23" stroke="#4361ee" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M17 5H9.5C8.57174 5 7.6815 5.36875 7.02513 6.02513C6.36875 6.6815 6 7.57174 6 8.5C6 9.42826 6.36875 10.3185 7.02513 10.9749C7.6815 11.6313 8.57174 12 9.5 12H14.5C15.4283 12 16.3185 12.3687 16.9749 13.0251C17.6313 13.6815 18 14.5717 18 15.5C18 16.4283 17.6313 17.3185 16.9749 17.9749C16.3185 18.6313 15.4283 19 14.5 19H6" stroke="#4361ee" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                Income Information
            </div>
            
            <div class="checkbox-group">
                <input type="checkbox" id="salaryToggle" onchange="toggleSalaryMode()">
                <label for="salaryToggle">I'm paid a salary (not hourly)</label>
            </div>
            
            <div id="hourlyFields">
                <div class="form-group">
                    <label for="hourlyWage">Hourly Wage ($)</label>
                    <input type="number" id="hourlyWage" step="0.01" min="0" placeholder="Enter your hourly wage">
                </div>
                
                <div class="form-group">
                    <label for="hoursPerWeek">Hours Per Week</label>
                    <input type="number" id="hoursPerWeek" step="0.5" min="0" max="168" value="40" placeholder="Hours worked per week">
                </div>
            </div>
            
            <div id="salaryFields" class="salary-fields">
                <div class="form-group">
                    <label for="annualSalary">Annual Salary ($)</label>
                    <input type="number" id="annualSalary" step="1000" min="0" placeholder="Enter your annual salary">
                </div>
                
                <div class="form-group">
                    <label for="workWeeksPerYear">Work Weeks Per Year</label>
                    <input type="number" id="workWeeksPerYear" step="1" min="1" max="52" value="50" placeholder="Work weeks per year">
                </div>
                
                <div class="form-group">
                    <label for="workHoursPerWeek">Work Hours Per Week</label>
                    <input type="number" id="workHoursPerWeek" step="0.5" min="0" max="168" value="40" placeholder="Work hours per week">
                </div>
            </div>
            
            <div class="grid">
                <div class="form-group">
                    <label for="state">State</label>
                    <select id="state" onchange="updateCounties()">
                        <option value="">Select State</option>
                        <option value="NY">New York</option>
                        <option value="CA">California</option>
                        <option value="TX">Texas</option>
                        <option value="FL">Florida</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="county">County</label>
                    <select id="county" disabled>
                        <option value="">Select County</option>
                    </select>
                </div>
            </div>
            
            <button onclick="calculateIncome()">
                Calculate Income
            </button>
            
            <div id="incomeResults" class="results hidden">
                <div class="results-title">Your Income Breakdown</div>
                
                <div class="result-group">
                    <div class="result-item">
                        <span class="result-label">Weekly (Before Tax)</span>
                        <span class="result-value" id="weeklyBeforeTax">$0.00</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Weekly (After Tax)</span>
                        <span class="result-value" id="weeklyAfterTax">$0.00</span>
                    </div>
                </div>
                
                <div class="result-group">
                    <div class="result-item">
                        <span class="result-label">Monthly (Before Tax)</span>
                        <span class="result-value" id="monthlyBeforeTax">$0.00</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Monthly (After Tax)</span>
                        <span class="result-value" id="monthlyAfterTax">$0.00</span>
                    </div>
                </div>
                
                <div class="result-group">
                    <div class="result-item">
                        <span class="result-label">Yearly (Before Tax)</span>
                        <span class="result-value" id="yearlyBeforeTax">$0.00</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Yearly (After Tax)</span>
                        <span class="result-value" id="yearlyAfterTax">$0.00</span>
                    </div>
                </div>
                
                <div class="result-group">
                    <div class="result-item">
                        <span class="result-label">Effective Tax Rate</span>
                        <span class="result-value" id="taxRate">0%</span>
                    </div>
                    <div class="result-item" id="hourlyRateResult">
                        <span class="result-label">Effective Hourly Rate (After Tax)</span>
                        <span class="result-value" id="effectiveHourlyRate">$0.00</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="card">
            <div class="card-title">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M20.59 13.41L13.42 20.58C13.2343 20.766 13.0137 20.9135 12.7709 21.0141C12.5281 21.1148 12.2678 21.1666 12.005 21.1666C11.7422 21.1666 11.4819 21.1148 11.2391 21.0141C10.9963 20.9135 10.7757 20.766 10.59 20.58L2 12V2H12L20.59 10.59C20.9625 10.9647 21.1716 11.4716 21.1716 12C21.1716 12.5284 20.9625 13.0353 20.59 13.41Z" stroke="#7209b7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M7 7H7.01" stroke="#7209b7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                Purchase Calculator
            </div>
            
            <div class="grid">
                <div class="form-group">
                    <label for="itemCost">Item Cost ($)</label>
                    <input type="number" id="itemCost" step="0.01" min="0" placeholder="Enter cost of item">
                </div>
                
                <div class="form-group">
                    <label for="itemName">Item Name (Optional)</label>
                    <input type="text" id="itemName" placeholder="e.g., Laptop, Vacation">
                </div>
            </div>
            
            <button onclick="calculateWorkHours()" style="background-color: var(--secondary);">
                Calculate Work Hours
            </button>
            
            <div id="purchaseResult" class="purchase-result hidden">
                You need to work <span id="workHours">0</span> hours to afford this item.
                <div id="workDays" class="purchase-detail"></div>
                
                <div class="worth-it-meter hidden" id="worthItMeter">
                    <div class="worth-it-label">Worth It Meter</div>
                    <div class="worth-it-bar">
                        <div class="worth-it-progress" id="worthItProgress"></div>
                    </div>
                    <div class="worth-it-text" id="worthItText"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // New York State Tax Rate: 4.00% to 10.90% (using 6.85% as middle tier)
        // New York State also has a standard deduction of $8,000 for single filers
        
        // Complete NY County data with accurate local income tax rates
        // Note: NY City has an additional income tax, counties don't directly tax income
        // but have sales tax that varies by county
        
        const taxData = {
            "NY": {
                stateTax: 0.0685, // Middle tier rate for demonstration
                counties: {
                    "Albany County": 0.04,
                    "Allegany County": 0.085,
                    "Bronx County (NYC)": 0.045, // NYC income tax
                    "Broome County": 0.08,
                    "Cattaraugus County": 0.085,
                    "Cayuga County": 0.08,
                    "Chautauqua County": 0.08,
                    "Chemung County": 0.0825,
                    "Chenango County": 0.08,
                    "Clinton County": 0.08,
                    "Columbia County": 0.08,
                    "Cortland County": 0.08,
                    "Delaware County": 0.08,
                    "Dutchess County": 0.0813,
                    "Erie County": 0.0875,
                    "Essex County": 0.08,
                    "Franklin County": 0.08,
                    "Fulton County": 0.08,
                    "Genesee County": 0.08,
                    "Greene County": 0.08,
                    "Hamilton County": 0.08,
                    "Herkimer County": 0.0825,
                    "Jefferson County": 0.08,
                    "Kings County (NYC)": 0.045, // NYC income tax
                    "Lewis County": 0.08,
                    "Livingston County": 0.08,
                    "Madison County": 0.08,
                    "Monroe County": 0.08,
                    "Montgomery County": 0.08,
                    "Nassau County": 0.08625,
                    "New York County (NYC)": 0.045, // NYC income tax
                    "Niagara County": 0.08,
                    "Oneida County": 0.0825,
                    "Onondaga County": 0.08,
                    "Ontario County": 0.0775,
                    "Orange County": 0.0825,
                    "Orleans County": 0.08,
                    "Oswego County": 0.08,
                    "Otsego County": 0.08,
                    "Putnam County": 0.0838,
                    "Queens County (NYC)": 0.045, // NYC income tax
                    "Rensselaer County": 0.08,
                    "Richmond County (NYC)": 0.045, // NYC income tax
                    "Rockland County": 0.0838,
                    "Saratoga County": 0.07,
                    "Schenectady County": 0.08,
                    "Schoharie County": 0.08,
                    "Schuyler County": 0.08,
                    "Seneca County": 0.08,
                    "St. Lawrence County": 0.08,
                    "Steuben County": 0.08,
                    "Suffolk County": 0.08625,
                    "Sullivan County": 0.08,
                    "Tioga County": 0.08,
                    "Tompkins County": 0.08,
                    "Ulster County": 0.08,
                    "Warren County": 0.07,
                    "Washington County": 0.07,
                    "Wayne County": 0.08,
                    "Westchester County": 0.0838,
                    "Wyoming County": 0.08,
                    "Yates County": 0.08
                }
            },
            "CA": {
                stateTax: 0.0925,
                counties: {
                    "Los Angeles": 0.0975,
                    "San Francisco": 0.0875,
                    "San Diego": 0.0775
                }
            },
            "TX": {
                stateTax: 0, // No state income tax
                counties: {
                    "Harris": 0.0825, // Sales tax only
                    "Dallas": 0.0825, // Sales tax only
                    "Travis": 0.0825 // Sales tax only
                }
            },
            "FL": {
                stateTax: 0, // No state income tax
                counties: {
                    "Miami-Dade": 0.07, // Sales tax only
                    "Broward": 0.07, // Sales tax only
                    "Palm Beach": 0.07 // Sales tax only
                }
            }
        };

        // Federal tax brackets for 2024
        const federalTaxBrackets = [
            { limit: 11600, rate: 0.10 },
            { limit: 47150, rate: 0.12 },
            { limit: 100525, rate: 0.22 },
            { limit: 191950, rate: 0.24 },
            { limit: 243725, rate: 0.32 },
            { limit: 609350, rate: 0.35 },
            { limit: Infinity, rate: 0.37 }
        ];

        // Global variables to store calculated income
        let afterTaxHourly = 0;
        let beforeTaxHourly = 0;
        let isSalaryMode = false;

        function toggleSalaryMode() {
            isSalaryMode = document.getElementById('salaryToggle').checked;
            document.getElementById('hourlyFields').style.display = isSalaryMode ? 'none' : 'block';
            document.getElementById('salaryFields').style.display = isSalaryMode ? 'block' : 'none';
        }

        function updateCounties() {
            const stateSelect = document.getElementById('state');
            const countySelect = document.getElementById('county');
            
            // Clear existing options
            countySelect.innerHTML = '<option value="">Select County</option>';
            
            const selectedState = stateSelect.value;
            
            if (selectedState && taxData[selectedState]) {
                const counties = Object.keys(taxData[selectedState].counties);
                
                counties.forEach(county => {
                    const option = document.createElement('option');
                    option.value = county;
                    option.textContent = county;
                    countySelect.appendChild(option);
                });
                
                countySelect.disabled = false;
            } else {
                countySelect.disabled = true;
            }
        }

        function calculateFederalTax(yearlyIncome) {
            // Standard deduction for 2024 (single filer)
            const standardDeduction = 14600;
            const taxableIncome = Math.max(0, yearlyIncome - standardDeduction);
            
            let tax = 0;
            let remainingIncome = taxableIncome;
            let previousLimit = 0;
            
            for (const bracket of federalTaxBrackets) {
                const taxableInThisBracket = Math.min(remainingIncome, bracket.limit - previousLimit);
                tax += taxableInThisBracket * bracket.rate;
                
                remainingIncome -= taxableInThisBracket;
                previousLimit = bracket.limit;
                
                if (remainingIncome <= 0) break;
            }
            
            // Add FICA taxes (Social Security 6.2% + Medicare 1.45%)
            const ficaTax = Math.min(yearlyIncome, 168600) * 0.062; // Social Security cap for 2024
            const medicareTax = yearlyIncome * 0.0145;
            
            return tax + ficaTax + medicareTax;
        }

        function calculateNYStateTax(yearlyIncome) {
            // NY State Standard Deduction (single filer): $8,000
            const standardDeduction = 8000;
            const taxableIncome = Math.max(0, yearlyIncome - standardDeduction);
            
            // NY State Tax Brackets (2024)
            if (taxableIncome <= 13900) {
                return taxableIncome * 0.04;
            } else if (taxableIncome <= 21400) {
                return 556 + (taxableIncome - 13900) * 0.045;
            } else if (taxableIncome <= 80650) {
                return 893 + (taxableIncome - 21400) * 0.0525;
            } else if (taxableIncome <= 215400) {
                return 4010 + (taxableIncome - 80650) * 0.0585;
            } else if (taxableIncome <= 1077550) {
                return 11945 + (taxableIncome - 215400) * 0.0625;
            } else if (taxableIncome <= 5000000) {
                return 66079 + (taxableIncome - 1077550) * 0.0685;
            } else if (taxableIncome <= 25000000) {
                return 334890 + (taxableIncome - 5000000) * 0.0965;
            } else {
                return 2258166 + (taxableIncome - 25000000) * 0.109;
            }
        }

        function calculateIncome() {
            let yearlyBeforeTax, weeklyBeforeTax, hoursPerWeek;
            
            if (isSalaryMode) {
                const annualSalary = parseFloat(document.getElementById('annualSalary').value);
                const workWeeksPerYear = parseFloat(document.getElementById('workWeeksPerYear').value);
                hoursPerWeek = parseFloat(document.getElementById('workHoursPerWeek').value);
                
                if (isNaN(annualSalary) || isNaN(workWeeksPerYear) || isNaN(hoursPerWeek) || 
                    annualSalary <= 0 || workWeeksPerYear <= 0 || hoursPerWeek <= 0) {
                    alert('Please enter valid salary information.');
                    return;
                }
                
                yearlyBeforeTax = annualSalary;
                weeklyBeforeTax = yearlyBeforeTax / workWeeksPerYear;
                beforeTaxHourly = weeklyBeforeTax / hoursPerWeek;
            } else {
                const hourlyWage = parseFloat(document.getElementById('hourlyWage').value);
                hoursPerWeek = parseFloat(document.getElementById('hoursPerWeek').value);
                
                if (isNaN(hourlyWage) || isNaN(hoursPerWeek) || hourlyWage <= 0 || hoursPerWeek <= 0) {
                    alert('Please enter valid hourly wage and hours per week.');
                    return;
                }
                
                beforeTaxHourly = hourlyWage;
                weeklyBeforeTax = hourlyWage * hoursPerWeek;
                yearlyBeforeTax = weeklyBeforeTax * 52;
            }
            
            const monthlyBeforeTax = yearlyBeforeTax / 12;
            
            // Calculate taxes
            const state = document.getElementById('state').value;
            const county = document.getElementById('county').value;
            
            let federalTax = calculateFederalTax(yearlyBeforeTax);
            let stateTax = 0;
            let localTax = 0;
            
            if (state === "NY") {
                stateTax = calculateNYStateTax(yearlyBeforeTax);
                
                // NYC residents pay additional city tax
                if (county && (county === "Bronx County (NYC)" || county === "Kings County (NYC)" || 
                               county === "New York County (NYC)" || county === "Queens County (NYC)" ||
                               county === "Richmond County (NYC)")) {
                    // NYC income tax rates (approximate)
                    if (yearlyBeforeTax <= 12000) {
                        localTax = yearlyBeforeTax * 0.03078;
                    } else if (yearlyBeforeTax <= 25000) {
                        localTax = yearlyBeforeTax * 0.03762;
                    } else if (yearlyBeforeTax <= 50000) {
                        localTax = yearlyBeforeTax * 0.03819;
                    } else {
                        localTax = yearlyBeforeTax * 0.03876;
                    }
                }
            } else if (state && taxData[state]) {
                // For other states, use the simplified rates
                stateTax = yearlyBeforeTax * taxData[state].stateTax;
                
                if (county && taxData[state].counties[county]) {
                    // This is mostly for NYC income tax, as other counties don't typically have income tax
                    // (they have sales tax, which isn't directly applied to income)
                    localTax = yearlyBeforeTax * taxData[state].counties[county];
                }
            }
            
            const totalTax = federalTax + stateTax + localTax;
            const effectiveTaxRate = (totalTax / yearlyBeforeTax) * 100;
            
            // Calculate after-tax income
            const yearlyAfterTax = yearlyBeforeTax - totalTax;
            const monthlyAfterTax = yearlyAfterTax / 12;
            const weeklyAfterTax = yearlyAfterTax / 52;
            
            // Calculate effective hourly rate
            afterTaxHourly = weeklyAfterTax / hoursPerWeek;
            
            // Display results
            document.getElementById('weeklyBeforeTax').textContent = '$' + weeklyBeforeTax.toFixed(2);
            document.getElementById('weeklyAfterTax').textContent = '$' + weeklyAfterTax.toFixed(2);
            document.getElementById('monthlyBeforeTax').textContent = '$' + monthlyBeforeTax.toFixed(2);
            document.getElementById('monthlyAfterTax').textContent = '$' + monthlyAfterTax.toFixed(2);
            document.getElementById('yearlyBeforeTax').textContent = '$' + yearlyBeforeTax.toFixed(2);
            document.getElementById('yearlyAfterTax').textContent = '$' + yearlyAfterTax.toFixed(2);
            document.getElementById('taxRate').textContent = effectiveTaxRate.toFixed(1) + '%';
            document.getElementById('effectiveHourlyRate').textContent = '$' + afterTaxHourly.toFixed(2);
            
            document.getElementById('incomeResults').classList.remove('hidden');
        }

        function calculateWorkHours() {
            const itemCost = parseFloat(document.getElementById('itemCost').value);
            const itemName = document.getElementById('itemName').value.trim();
            const itemDisplay = itemName ? itemName : "this item";
            
            if (isNaN(itemCost) || itemCost <= 0) {
                alert('Please enter a valid item cost.');
                return;
            }
            
            if (afterTaxHourly <= 0) {
                alert('Please calculate your income first.');
                document.getElementById(isSalaryMode ? 'annualSalary' : 'hourlyWage').focus();
                return;
            }
            
            // Calculate work hours needed (using after-tax hourly rate)
            const hoursNeeded = itemCost / afterTaxHourly;
            
            // Calculate days based on 8-hour workday
            const daysNeeded = hoursNeeded / 8;
            const weeksNeeded = daysNeeded / 5;
            
            let timeDetail = '';
            if (weeksNeeded >= 1) {
                timeDetail = `That's approximately ${weeksNeeded.toFixed(1)} work weeks or ${daysNeeded.toFixed(1)} work days (8-hour days).`;
            } else if (daysNeeded >= 1) {
                timeDetail = `That's approximately ${daysNeeded.toFixed(1)} work days (8-hour days).`;
            } else {
                timeDetail = `That's less than one full workday.`;
            }
            
            document.getElementById('workHours').textContent = hoursNeeded.toFixed(1);
            document.getElementById('workDays').textContent = timeDetail;
            document.getElementById('purchaseResult').classList.remove('hidden');
            
            // Calculate the "Worth It" rating
            calculateWorthItMeter(hoursNeeded);
        }
        
        function calculateWorthItMeter(hoursNeeded) {
            const worthItMeter = document.getElementById('worthItMeter');
            const worthItProgress = document.getElementById('worthItProgress');
            const worthItText = document.getElementById('worthItText');
            
            // Calculate ratio of hours needed to hours in a workday (8)
            const ratio = hoursNeeded / 8;
            
            // Set progress bar width (capped at 100%)
            const progressWidth = Math.min(ratio * 100, 100);
            worthItProgress.style.width = progressWidth + '%';
            
            // Determine the color and message based on the ratio
            let color, message;
            
            if (ratio <= 0.5) {
                // Less than half a day = worth it (green)
                color = 'var(--success)';
                message = 'Worth it! 👍';
                worthItText.className = 'worth-it-text worth-it';
            } else if (ratio <= 1) {
                // Less than a full day = kinda worth it (light green)
                color = '#20bf6b';
                message = 'Kinda worth it';
                worthItText.className = 'worth-it-text kinda-worth-it';
            } else if (ratio <= 1.7) {
                // Less than 1.7 days = maybe worth it (yellow)
                color = 'var(--warning)';
                message = 'Probably not worth it, but could get away with it';
                worthItText.className = 'worth-it-text maybe-worth-it';
            } else {
                // More than 1.7 days = not worth it (red)
                color = 'var(--danger)';
                message = 'Not worth it, but up to you';
                worthItText.className = 'worth-it-text not-worth-it';
            }
            
            worthItProgress.style.backgroundColor = color;
            worthItText.textContent = message;
            
            // Show the meter
            worthItMeter.classList.remove('hidden');
        }
    </script>
</body>
</html>
